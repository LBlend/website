---
import { getCollection } from "astro:content";

import Rss from "@assets/icons/rss.svg";

import FormattedDate from "@components/FormattedDate.astro";

const posts = await getCollection("blog");
posts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
const latestPosts = posts.slice(0, 5);
---

<section class="blog-list">
  <div class="flex items-center justify-between">
    <h2>Latest Posts</h2>
    <a href="/rss.xml" class="flex items-center justify-center gap-2 rounded-md text-xl">
      <Rss class="size-4" />
      Subscribe
    </a>
  </div>

  {
    latestPosts.map((post) => (
      <article>
        <span class="font-light">
          <FormattedDate date={post.data.pubDate} />
        </span>
        <h3>
          <a href={`/blog/${post.id}`}>{post.data.title}</a>
        </h3>
      </article>
    ))
  }
  <a href="/blog"> View all posts </a>
</section>
